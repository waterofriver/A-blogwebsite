<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>极客风格登录</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background-color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    /* 输入框和按钮容器样式 */
    .container {
      position: absolute;
      text-align: center;
      z-index: 1;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      width: 90%;
      max-width: 400px;
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }

    h1 {
      color: white;
      margin-bottom: 24px;
      font-weight: 400;
    }

    .form-group {
      position: relative;
      margin-bottom: 24px;
    }

    .form-group input {
      width: 100%;
      padding: 14px 16px;
      padding-top: 20px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.05);
      color: white;
      font-size: 14px;
    }

    .form-group input:focus {
      border-color: rgba(123, 97, 255, 0.8);
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0 0 0 3px rgba(123, 97, 255, 0.2);
      outline: none;
    }

    .form-group label {
      position: absolute;
      left: 16px;
      top: 16px;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.6);
      transition: all 0.2s ease;
      pointer-events: none;
      padding: 0 4px;
      background: transparent;
    }

    .form-group input:focus + label,
    .form-group input:not(:placeholder-shown) + label {
      transform: translateY(-26px);
      left: 12px;
      font-size: 12px;
      color: rgba(123, 97, 255, 0.8);
      font-weight: 500;
      background: rgba(255, 255, 255, 0.05);
    }

    button {
      width: 100%;
      padding: 12px 24px;
      background: linear-gradient(90deg, #7b61ff, #6a5acd);
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(123, 97, 255, 0.3);
    }

    button:hover {
      background: linear-gradient(90deg, #8a74ff, #796cdc);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(123, 97, 255, 0.4);
    }

    p {
      color: rgba(255, 255, 255, 0.6);
      font-size: 14px;
      margin-top: 16px;
    }

    a {
      color: #7b61ff;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    a:hover {
      color: #927eff;
      text-decoration: underline;
    }

    /* 消息提示样式 */
    .alert {
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 24px;
      font-size: 14px;
    }

    .alert-success {
      background-color: rgba(46, 204, 113, 0.1);
      color: rgba(46, 204, 113, 0.8);
      border: 1px solid rgba(46, 204, 113, 0.2);
    }

    .alert-danger {
      background-color: rgba(231, 76, 60, 0.1);
      color: rgba(231, 76, 60, 0.8);
      border: 1px solid rgba(231, 76, 60, 0.2);
    }

    /* canvas 占满整个页面，用于绘制背景圆环 */
    canvas {
      display: block;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
    }

    /* 浮动装饰元素 */
    .floating-element {
      position: absolute;
      width: 10px;
      height: 10px;
      background: rgba(123, 97, 255, 0.5);
      border-radius: 50%;
      pointer-events: none;
      animation: float 6s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(180deg);
      }
    }
  </style>
</head>

<body>
  <!-- 浮动装饰元素 -->
  <div class="floating-element" style="top: 15%; left: 10%; animation-delay: 0s;"></div>
  <div class="floating-element" style="top: 80%; left: 20%; animation-delay: 1s;"></div>
  <div class="floating-element" style="top: 25%; left: 85%; animation-delay: 2s;"></div>
  <div class="floating-element" style="top: 70%; left: 75%; animation-delay: 3s;"></div>
  <div class="floating-element" style="top: 45%; left: 15%; animation-delay: 4s;"></div>
  <div class="floating-element" style="top: 50%; left: 80%; animation-delay: 5s;"></div>

  <div class="container">
    <h1>登录</h1>
    
    <!-- 消息提示区域 -->
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form method="POST">
      {% csrf_token %}
      <div class="form-group">
        <input type="text" name="username" id="username" required placeholder="">
        <label for="username">用户名</label>
      </div>
      <div class="form-group">
        <input type="password" name="password" id="password" required placeholder="">
        <label for="password">密码</label>
      </div>
      <button type="submit">登录</button>
    </form>
    
    <p>还没有账号？ <a href="{% url 'register' %}">注册</a></p>
    <p>忘记密码？ <a href="{% url 'forgot_password' %}">重置密码</a></p>
  </div>

  <canvas id="bgCanvas"></canvas>

  <script>
    // 获取 canvas 元素和上下文
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let centerX, centerY; // 圆环中心坐标
    let circleRadius = 300; // 圆环的基础半径，可根据需求调整
    let isDragging = false; // 鼠标拖拽状态
    let dragStartX, dragStartY; // 拖拽起始位置
    let offsetX = 0, offsetY = 0; // 拖拽偏移量

    // 监听窗口变化，重新设置 canvas 尺寸和圆环中心
    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      centerX = canvas.width / 2;
      centerY = canvas.height / 2;
      drawCircle();
    });
    // 初始化执行一次
    window.dispatchEvent(new Event('resize'));

    // 鼠标移动事件，更新圆环中心坐标，实现跟随效果
    document.addEventListener('mousemove', (e) => {
      if (isDragging) {
        // 拖拽模式下直接更新中心位置
        centerX = e.clientX - offsetX;
        centerY = e.clientY - offsetY;
      } else {
        // 非拖拽模式下缓慢跟随
        centerX += (e.clientX - centerX) * 0.02;
        centerY += (e.clientY - centerY) * 0.02;
      }
      drawCircle();
    });

    // 鼠标按下事件，开始拖拽
    document.addEventListener('mousedown', (e) => {
      // 计算鼠标位置与圆环中心的距离
      const dx = e.clientX - centerX;
      const dy = e.clientY - centerY;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      // 如果鼠标在圆环范围内，允许拖拽
      if (distance < circleRadius + 60) {
        isDragging = true;
        dragStartX = e.clientX;
        dragStartY = e.clientY;
        offsetX = dragStartX - centerX;
        offsetY = dragStartY - centerY;
      }
    });

    // 鼠标释放事件，结束拖拽
    document.addEventListener('mouseup', () => {
      isDragging = false;
    });

    // 绘制渐变圆环的函数
    function drawCircle() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // 创建多个同心圆，增强视觉效果
      drawRing(centerX, centerY, circleRadius, 120, [
        { offset: 0.4, color: 'rgba(147, 51, 234, 0.3)' },
        { offset: 0.6, color: 'rgba(90, 130, 255, 0.3)' },
        { offset: 1, color: 'rgba(0, 0, 0, 0)' }
      ]);
      
      // 内圈
      drawRing(centerX, centerY, circleRadius * 0.7, 80, [
        { offset: 0.2, color: 'rgba(90, 130, 255, 0.2)' },
        { offset: 0.8, color: 'rgba(147, 51, 234, 0)' }
      ]);
      
      // 中心点
      ctx.beginPath();
      ctx.arc(centerX, centerY, 5, 0, 2 * Math.PI);
      ctx.fillStyle = 'rgba(123, 97, 255, 0.8)';
      ctx.fill();
    }

    // 辅助函数：绘制单个圆环
    function drawRing(x, y, radius, width, colorStops) {
      const gradient = ctx.createRadialGradient(x, y, radius - width, x, y, radius);
      colorStops.forEach(stop => {
        gradient.addColorStop(stop.offset, stop.color);
      });
      
      ctx.beginPath();
      ctx.arc(x, y, radius, 0, 2 * Math.PI);
      ctx.strokeStyle = gradient;
      ctx.lineWidth = width;
      ctx.stroke();
    }

    // 初始化绘制一次圆环
    drawCircle();

    // 添加轻微的背景动画
    let rotation = 0;
    function animate() {
      rotation += 0.05;
      drawCircle();
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>

</html>
    